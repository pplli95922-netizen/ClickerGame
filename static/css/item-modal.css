/* ===== ITEM MODAL (BIG) ===== */
.item-modal{
  position: fixed;
  inset: 0;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
}
.item-modal.hidden{ display:none !important; }

.item-modal__backdrop{
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.72);
}

.item-modal__card{
  position: relative;
  width: min(620px, calc(100vw - 26px));
  min-height: 480px;
  border-radius: 22px;
  padding: 18px 18px 18px;
  background: rgba(10,12,16,0.92);
  border: 2px solid rgba(255,255,255,0.14);
  box-shadow: 0 18px 60px rgba(0,0,0,0.78);
  backdrop-filter: blur(6px);
  z-index: 1;
  overflow: hidden;
}

.item-modal__close{
  position: absolute;
  top: 12px;
  right: 12px;
  width: 38px;
  height: 38px;
  border-radius: 12px;
  border: none;
  color: #fff;
  background: rgba(0,0,0,0.55);
  font-size: 20px;
  z-index: 6;
}

.item-modal__img{
  width: 170px;
  height: 170px;
  display: block;
  margin: 56px auto 10px; /* ниже бейджей */
  border-radius: 22px;
  image-rendering: pixelated;
  background: rgba(0,0,0,0.35);
  border: 2px solid rgba(255,255,255,0.10);
}

.item-modal__meta{
  color: rgba(255,255,255,0.65);
  text-align: center;
  margin-top: 6px;
  font-size: 13px;
}

.item-modal__btn{
  width: 100%;
  margin-top: 16px;
  padding: 14px 0;
  border-radius: 16px;
  border: none;
  font-weight: 900;
  font-size: 16px;
  color: #fff;
  background: linear-gradient(180deg, #2d7cff, #1a4fb8);
}
.item-modal__btn:disabled{ opacity: 0.65; }

/* ===== Подсветка окна по редкости ===== */
.item-modal__card.rarity-common{
  border-color: rgba(255,255,255,0.18);
  box-shadow: 0 18px 60px rgba(0,0,0,0.78), 0 0 20px rgba(180,180,180,0.10);
}
.item-modal__card.rarity-uncommon{
  border-color: rgba(120,255,140,0.70);
  box-shadow: 0 18px 60px rgba(0,0,0,0.78), 0 0 30px rgba(120,255,140,0.22);
}
.item-modal__card.rarity-rare{
  border-color: rgba(110,170,255,0.85);
  box-shadow: 0 18px 60px rgba(0,0,0,0.78), 0 0 32px rgba(110,170,255,0.22);
}
.item-modal__card.rarity-epic{
  border-color: rgba(190,120,255,0.90);
  box-shadow: 0 18px 60px rgba(0,0,0,0.78), 0 0 34px rgba(190,120,255,0.25);
}
.item-modal__card.rarity-legendary{
  border-color: rgba(255,205,90,0.95);
  box-shadow: 0 18px 60px rgba(0,0,0,0.78), 0 0 38px rgba(255,205,90,0.26);
}

/* карточка БОЛЬШЕ (работает на телефоне) */
.item-modal__card{
  width: calc(100vw - 24px);
  max-width: 680px;

  height: min(78vh, 720px);
  min-height: 520px;

  border-radius: 26px;
  padding: 20px;
}

/* LVL слева сверху */
.item-modal__lvl{
  position: absolute;
  top: 14px;
  left: 14px;
  z-index: 6;
}

/* RARITY справа сверху (чтобы не под X) */
.item-modal__rarity{
  position: absolute;
  top: 14px;
  right: 70px;
  z-index: 6;

  border-color: rgba(190,120,255,0.8);
}

/* картинка больше и выше */
.item-modal__img{
  width: 180px;
  height: 180px;
  margin: 64px auto 0;
}

/* низ прибит к низу */
.item-modal__bottom{
  position: absolute;
  left: 16px;
  right: 16px;
  bottom: 16px;
}

.item-modal__atk{
  font-size: 26px;
  font-weight: 900;

  background: linear-gradient(180deg,#9cff8f,#4dff4d);
  -webkit-background-clip: text;
  background-clip: text;

  color: transparent;
  -webkit-text-fill-color: transparent;

  text-align: center;
}

.item-modal__meta{
  margin-top: 0;
  margin-bottom: 14px;
}

.item-modal__lvl{
  position: absolute;
  top: 14px;
  left: 14px;
  z-index: 6;
}

.item-modal__rarity{
  position: absolute;
  top: 14px;
  right: 70px; /* чтобы не под X */
  z-index: 6;
}

#itemModalLvl, #itemModalRarity { color: rgba(255,255,255,0.95) !important; }

/* TOP: LVL слева, RARITY справа */
.item-modal__top{
  position: absolute;
  top: 14px;
  left: 14px;
  right: 70px; /* чтобы не залезало под X */
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 6;
}

/* Плашки как монеты/дерево */
.item-modal__pill{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: 6px 12px;
  min-height: 28px;

  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.6px;
  text-transform: uppercase;

  color: #fff;

  background: linear-gradient(
    180deg,
    rgba(20,22,28,0.95),
    rgba(10,12,16,0.95)
  );

  border: 1.5px solid rgba(255,255,255,0.28);
  border-radius: 999px;

  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,0.65),
    0 2px 8px rgba(0,0,0,0.65);
}

/* чуть плотнее для редкости */
.item-modal__pill--rarity{
  border-color: rgba(255,255,255,0.35);
}

/* glow по редкости */
.item-modal__card.rarity-epic{
  box-shadow:
    0 0 0 1px rgba(180,90,255,.6),
    0 0 22px rgba(180,90,255,.35),
    inset 0 0 40px rgba(120,40,200,.18);
}

.item-modal__card.rarity-legendary{
  box-shadow:
    0 0 0 1px rgba(255,190,90,.7),
    0 0 28px rgba(255,180,80,.45),
    inset 0 0 48px rgba(255,160,60,.22);
}

.item-modal__img-wrap{
  border-radius: 18px;
  background:
    radial-gradient(
      circle at 50% 40%,
      rgba(255,255,255,0.08),
      rgba(0,0,0,0.35) 70%
    );
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.12),
    inset 0 0 24px rgba(0,0,0,0.6);
}

@keyframes modalPop{
  from{
    transform: scale(.96);
    opacity: 0;
  }
  to{
    transform: scale(1);
    opacity: 1;
  }
}

.item-modal__card{
  /* ПЕРГАМЕНТ */
  background:
    radial-gradient(
      circle at 50% 20%,
      rgba(255,255,255,0.08),
      rgba(0,0,0,0.45) 70%
    ),
    linear-gradient(
      180deg,
      #2b241a,
      #1b1610
    );

  /* текстура бумаги (имитация) */
  box-shadow:
    inset 0 0 0 1px rgba(255,230,180,0.15),
    inset 0 0 60px rgba(0,0,0,0.65);
}

.item-modal__stats{
  margin: 0 auto 28px;

  width: min(420px, 92%);
  padding: 14px 16px;

  border-radius: 18px;

  background:
    linear-gradient(180deg, rgba(25,20,14,0.92), rgba(12,10,7,0.92));
  border: 1.5px solid rgba(255,220,160,0.28);

  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,0.65),
    0 8px 20px rgba(0,0,0,0.55);

  margin-left: auto;
  margin-right: auto;
}

.item-modal__stats-title{
  color: #e6c27a;
  margin: 0 0 10px;        /* было margin-top:40px — убрать */
  text-align: center;
  font-weight: 800;
  letter-spacing: 1px;
}

.item-modal__stats-lines{
  margin-top: 8px;
  padding: 6px 0 0;

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.item-modal__stats{
  min-height: 140px;   /* вместо height */
  overflow: visible;  /* важно */
}

.item-modal__stat--sub{
  font-size: 14px;
  font-weight: 800;
  color: rgba(215,228,255,0.85);
  text-shadow: 0 2px 6px rgba(0,0,0,0.55);
}

.item-modal__bottom{ bottom: 22px; }


.item-modal__actions{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.item-modal__btn--danger{
  background: linear-gradient(180deg, rgba(220,60,60,0.95), rgba(140,20,20,0.95));
  border: 1px solid rgba(255,120,120,0.45);
}

.item-modal__btn--danger:disabled{
  opacity: 0.6;
  filter: grayscale(0.2);
}