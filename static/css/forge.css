.forge-img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

@keyframes forgePulse {
  0%   { box-shadow: 0 0 18px rgba(255,120,0,0.6); }
  50%  { box-shadow: 0 0 28px rgba(255,160,40,0.9); }
  100% { box-shadow: 0 0 18px rgba(255,120,0,0.6); }
}

.craft-btn {
  animation: forgePulse 2.2s infinite ease-in-out;
}

.forge-hud{
  position: absolute;
  top: 12px;
  left: 12px;
  z-index: 12;

  width: 170px;
  padding: 10px 10px 8px;
  border-radius: 14px;

  background: rgba(10, 8, 6, 0.70);
  border: 1px solid rgba(255, 190, 90, 0.45);

  box-shadow:
    0 10px 22px rgba(0,0,0,0.55),
    0 0 18px rgba(255,120,0,0.22);

  backdrop-filter: blur(4px);
}

.forge-hud__title{
  font-weight: 900;
  font-size: 13px;
  color: #fff;
  text-shadow: 0 2px 6px rgba(0,0,0,0.85);
  margin-bottom: 8px;
}

.forge-hud__bar{
  height: 10px;
  width: 100%;
  border-radius: 999px;
  overflow: hidden;

  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255, 190, 90, 0.35);
}

.forge-hud__fill{
  height: 100%;
  width: 0%;

  background: linear-gradient(90deg, #ffcc66, #ff7a18, #c43b00);
  box-shadow: 0 0 14px rgba(255, 120, 0, 0.65);

  transition: width 0.25s ease;
}

.forge-hud__meta{
  margin-top: 6px;
  font-size: 11px;
  font-weight: 800;
  color: rgba(255,255,255,0.85);
  text-shadow: 0 2px 6px rgba(0,0,0,0.75);
}

.forge-hud__res{
  display: flex;
  gap: 10px;
  margin-bottom: 8px;
}

.forge-hud__res-item{
  display: inline-flex;
  align-items: center;
  gap: 6px;

  padding: 4px 8px;
  border-radius: 999px;

  font-weight: 900;
  font-size: 12px;
  color: #fff;

  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,190,90,0.25);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.35);
}

.forge-hud__ico{
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.6));
}

/* –ö–Ω–æ–ø–∫–∞ –ø–æ–¥ forge-hud, –Ω–æ –ù–ï –≤–Ω—É—Ç—Ä–∏ */
.forge-upgrade-outside{
  position: static;
  left: 12px;
  top: 12px; /* –±–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞ */
  z-index: 12;

  width: 100%; /* —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å forge-hud */
  height: 38px;
   margin-top: 10px;

  border-radius: 14px;
  border: 1px solid rgba(255, 190, 90, 0.55);

  font-weight: 900;
  font-size: 12px;
  letter-spacing: .6px;
  color: #fff;

  background: linear-gradient(180deg, #ffb347, #ff7a18, #c43b00);

  box-shadow:
    0 10px 22px rgba(0,0,0,0.55),
    0 0 16px rgba(255,120,0,0.35),
    inset 0 2px 0 rgba(255,255,255,0.25);

  text-shadow: 0 2px 6px rgba(0,0,0,0.85);
  cursor: pointer;

  transition: transform .12s ease, filter .12s ease;
}

/* –ù–∞–∂–∞—Ç–∏–µ */
.forge-upgrade-outside:active{
  transform: scale(0.97);
  filter: brightness(1.12);
}

.forge-upgrade-outside:disabled{
  opacity: 0.55;
  cursor: not-allowed;
  filter: grayscale(0.2);
}

/* –¶–µ–Ω—Ç—Ä–æ–≤–æ–π –¥—Ä–æ–ø –∫—É–∑–Ω–∏ */
#forgeView{ position: relative; }

.forge-drop{
  display: flex;
  justify-content: center;
  align-items: center;

  background: transparent;   /* —É–±—Ä–∞–ª–∏ –ø–ª–∞—à–∫—É */
  border-radius: 0;
  backdrop-filter: none;     /* –í–û–¢ –ì–î–ï –ë–´–õ–ê –ú–£–¢–¨ */
}

.forge-drop__slot{
  width: 136px;              /* 120px –∫–∞—Ä—Ç–∏–Ω–∫–∞ + —Ä–∞–º–∫–∞ */
  height: 136px;
  border-radius: 18px;

  display: flex;
  align-items: center;
  justify-content: center;

  background: transparent;    /* —É–±—Ä–∞–ª–∏ —Ç—ë–º–Ω—É—é ‚Äú–ø–ª–∞—à–∫—É‚Äù */
  border: 0;                  /* –µ—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–∂–µ—à—å –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–Ω–∫—É—é —Ä–∞–º–∫—É */
  box-shadow: none;           /* —É–±—Ä–∞–ª–∏ –±–æ–ª—å—à–æ–π –æ—Ä–µ–æ–ª */

  backdrop-filter: none;      /* –í–û–¢ –≠–¢–û —É–±–∏—Ä–∞–µ—Ç —Ä–∞–∑–º—ã—Ç–∏–µ */
}

/* –ö–∞—Ä—Ç–∏–Ω–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ */
.forge-drop__img{
  width: 120px;
  height: 120px;
  object-fit: contain;
  image-rendering: pixelated;
  filter: drop-shadow(0 8px 10px rgba(0,0,0,0.6));
}

/* –¢–µ–∫—Å—Ç –ø–æ–¥ —Å–ª–æ—Ç–æ–º */
.forge-drop__info{
  text-align: center;
  color: #fff;
  text-shadow: 0 2px 10px rgba(0,0,0,0.6);
}

.forge-drop__name{
  font-weight: 800;
  font-size: 14px;
  letter-spacing: 0.3px;
}

.forge-drop__meta{
  opacity: 0.9;
  font-size: 12px;
}

/* –ö–Ω–æ–ø–∫–∞ "–ó–∞–±—Ä–∞—Ç—å" */
.forge-drop__take{
  min-width: 140px;
  height: 38px;
  padding: 0 14px;
  border-radius: 14px;

  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.45);
  color: #fff;
  font-weight: 800;

  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.forge-drop__take:hover{
  transform: translateY(-1px);
  border-color: rgba(255,190,120,0.45);
  box-shadow: 0 0 16px rgba(255,140,0,0.22);
}

.forge-drop__take:active{
  transform: translateY(0px) scale(0.98);
}

/* ===== FIX: craftResult —Ä–∏—Å—É–µ–º –í–ù–£–¢–†–ò –∫—É–∑–Ω–∏, –ø–æ–≤–µ—Ä—Ö —Ñ–æ–Ω–∞ ===== */

/* –í–∞–∂–Ω–æ: –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —è–∫–æ—Ä–∏—Ç—å—Å—è –∫ modal-content */
#forgeModal .modal-content{
  position: relative;
  overflow: hidden; /* —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–ª–µ–∑–∞–ª–æ –Ω–∞ –æ–±—â–∏–π —ç–∫—Ä–∞–Ω */
}

/* –§–æ–Ω –∫—É–∑–Ω–∏ = –ø–æ–¥–ª–æ–∂–∫–∞, –Ω–µ –¥–≤–∏–≥–∞–µ—Ç —Ä–∞–∑–º–µ—Ç–∫—É */
#forgeModal .forge-img{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 1;
}

/* –í–µ—Å—å UI –∫—É–∑–Ω–∏ –ø–æ–≤–µ—Ä—Ö —Ñ–æ–Ω–∞ */
#forgeModal .forge-hud,
#forgeModal .craft-btn,
#forgeModal #craftResult,
#forgeModal #forgeDrop{
  position: relative;
  z-index: 20;
}

/* –ö—Ä–µ—Å—Ç–∏–∫ –≤—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
#forgeModal #closeForge{
  position: absolute;
  top: 22px;
  right: 8px;
  z-index: 60;
}

/* –°–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫—Ä–∞—Ñ—Ç–∞ ‚Äî –≤ —Ü–µ–Ω—Ç—Ä –∫—É–∑–Ω–∏ (–≤ –∫–≤–∞–¥—Ä–∞—Ç) */
#forgeModal #craftResult{
  position: absolute;
  left: 50%;
  top: 57%; /* –ø–æ–¥–≥–æ–Ω–∏ 55‚Äì62% —á—Ç–æ–±—ã —Ä–æ–≤–Ω–æ –≤ —Ç–≤–æ–π –∫–≤–∞–¥—Ä–∞—Ç */
  transform: translate(-50%, -50%);
  padding: 0;
  z-index: 40;
}

/* –ö–Ω–æ–ø–∫–∞ –∫—Ä–∞—Ñ—Ç–∞ ‚Äî –≤—Å–µ–≥–¥–∞ –≤–Ω–∏–∑—É –ø–æ —Ü–µ–Ω—Ç—Ä—É –≤–Ω—É—Ç—Ä–∏ –∫—É–∑–Ω–∏ */
#forgeModal .craft-btn{
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  z-index: 45;
  width: min(92%, 520px);
}

/* ===== Forge craft result = SLOT (–∫–∞–∫ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ) ===== */

/* ===== Craft result –≤ –∫—É–∑–Ω–µ = –º–∞–ª–µ–Ω—å–∫–∏–π —Å–ª–æ—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É ===== */
#forgeModal #craftResult{
  position: absolute;
  left: 50%;
  top: 46.5%; /* –±—ã–ª–æ –Ω–∏–∑–∫–æ ‚Äî –ø–æ–¥–Ω–∏–º–∞–µ–º. –ï—Å–ª–∏ –Ω–∞–¥–æ: 44‚Äì48% */
  transform: translate(-50%, -50%);
  padding: 0;        /* —É–±—Ä–∞–ª–∏ —Ç–≤–æ–π padding-bottom */
  z-index: 40;
}

/* –∫–∞—Ä—Ç–∏–Ω–∫–∞ –º–µ—á–∞ –º–µ–Ω—å—à–µ */
/* –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–º–∫–∞ ‚Äî —ç—Ç–æ —Å–∞–º PNG (–∫–∞–∫ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ) */
#forgeModal #weaponImg{
  width: 78px;
  height: 78px;
  object-fit: contain;
  image-rendering: pixelated;
  filter: drop-shadow(0 6px 8px rgba(0,0,0,0.7));
}

/* —É–±–∏—Ä–∞–µ–º –í–°–ï —Ç–µ–∫—Å—Ç—ã */
#forgeModal .weapon-info,
#forgeModal #weaponName,
#forgeModal #weaponAtk,
#forgeModal #weaponMeta{
  display: none;
}

#forgeModal #weaponCard::after{
  content: attr(data-lvl);
  position: absolute;
  right: 6px;
  bottom: 6px;

  font-size: 12px;
  font-weight: 900;
  color: #fff;

  text-shadow: 0 2px 4px rgba(0,0,0,0.85);
  pointer-events: none;
}

.craft-btn {
  position: absolute;
  left: 50%;
  bottom: 26px;
  transform: translateX(-50%);

  width: calc(100% - 40px);
  max-width: 390px;
  height: 64px;

  border-radius: 18px;
  border: 2px solid rgba(255, 200, 120, 0.9);

  font-size: 20px;
  font-weight: 900;
  letter-spacing: 1px;
  color: #fff;

  /* üî• –æ–≥–Ω–µ–Ω–Ω—ã–π –º–µ—Ç–∞–ª–ª */
  background:
    linear-gradient(
      180deg,
      #ffcc66 0%,
      #ff9a2e 30%,
      #ff6a00 60%,
      #c43b00 100%
    );

  /* üî• —Å–≤–µ—á–µ–Ω–∏–µ */
  box-shadow:
    0 10px 30px rgba(255, 120, 0, 0.65),
    0 0 26px rgba(255, 90, 0, 0.85),
    inset 0 2px 0 rgba(255,255,255,0.35),
    inset 0 -4px 0 rgba(120,30,0,0.8);

  text-shadow:
    0 2px 0 #5a1c00,
    0 0 12px rgba(255,200,120,0.8);

  cursor: pointer;
  z-index: 10;

  transition:
    transform 0.12s ease,
    box-shadow 0.12s ease,
    filter 0.12s ease;
}
.craft-btn:active {
  transform: translateX(-50%) scale(0.96);

  filter: brightness(1.15);

  box-shadow:
    0 4px 12px rgba(0,0,0,0.7),
    0 0 18px rgba(255,120,0,0.8),
    inset 0 4px 6px rgba(0,0,0,0.6);
}

/* ===== –§–û–ù –†–ï–î–ö–û–°–¢–ò –ö–ê–ö –í –ò–ù–í–ï–ù–¢–ê–†–ï (–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π) ===== */
#forgeModal #weaponCard.rarity-common{
  background: linear-gradient(135deg, rgba(120,120,120,0.45), rgba(60,60,60,0.75));
}
#forgeModal #weaponCard.rarity-uncommon{
  background: linear-gradient(135deg, rgba(90,200,120,0.55), rgba(30,90,50,0.85));
}
#forgeModal #weaponCard.rarity-rare{
  background: linear-gradient(135deg, rgba(80,140,220,0.6), rgba(25,55,120,0.9));
}
#forgeModal #weaponCard.rarity-epic{
  background: linear-gradient(135deg, rgba(180,90,255,0.7), rgba(70,20,120,0.95));
}
#forgeModal #weaponCard.rarity-legendary{
  background: linear-gradient(135deg, rgba(255,180,70,0.85), rgba(120,60,10,1));
}

/* ===== –õ–£–ß–ò (–¢–û–õ–¨–ö–û EPIC/LEGENDA) ===== */
#forgeModal #weaponCard.rarity-epic::before,
#forgeModal #weaponCard.rarity-legendary::before{
  content: "";
  position: absolute;
  inset: -28px;              /* —á—Ç–æ–±—ã –ª—É—á–∏ –≤—ã—Ö–æ–¥–∏–ª–∏ –∑–∞ —Å–ª–æ—Ç */
  pointer-events: none;
  z-index: 0;

  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.22), rgba(255,255,255,0) 55%),
    conic-gradient(
      from 0deg,
      rgba(255,255,255,0.00),
      rgba(255,255,255,0.18),
      rgba(255,255,255,0.00),
      rgba(255,255,255,0.14),
      rgba(255,255,255,0.00)
    );

  filter: blur(0.2px);
  opacity: 0.9;
  animation: forgeRaysSpin 4.5s linear infinite;
}

/* ===== –õ–£–ß–ò (—è—Ä—á–µ + –ø–ª–∞–≤–Ω—ã–π fade) ‚Äî —Ç–æ–ª—å–∫–æ EPIC/LEGENDA ===== */
#forgeModal #weaponCard.rarity-epic::before,
#forgeModal #weaponCard.rarity-legendary::before{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width: 220px;
  height: 220px;
  transform: translate(-50%, -50%);
  border-radius: 999px;
  pointer-events:none;
  z-index: 0;

  /* –ª—É—á–∏ + –º—è–≥–∫–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ */
  background:
    radial-gradient(circle,
      rgba(255,255,255,0.20) 0%,
      rgba(255,255,255,0.00) 55%
    ),
    repeating-conic-gradient(
      from 0deg,
      rgba(255,255,255,0.00) 0deg,
      rgba(255,255,255,0.55) 7deg,
      rgba(255,255,255,0.00) 16deg
    );

  /* –í–ê–ñ–ù–û: –º–∞—Å–∫–∞ –¥–µ–ª–∞–µ—Ç –∫—Ä–∞—è –ø–ª–∞–≤–Ω—ã–º–∏ (–Ω–µ—Ç ‚Äú–∂—ë—Å—Ç–∫–æ–≥–æ –∫—Ä—É–≥–∞‚Äù) */
  -webkit-mask: radial-gradient(circle,
    rgba(0,0,0,1) 0%,
    rgba(0,0,0,1) 55%,
    rgba(0,0,0,0.45) 70%,
    rgba(0,0,0,0.00) 100%
  );
  mask: radial-gradient(circle,
    rgba(0,0,0,1) 0%,
    rgba(0,0,0,1) 55%,
    rgba(0,0,0,0.45) 70%,
    rgba(0,0,0,0.00) 100%
  );

  filter: blur(1.2px);
  opacity: 0.95;                 /* —è—Ä—á–µ */
  animation: forgeRaysSpin 4.5s linear infinite;
}

/* —Ü–≤–µ—Ç–æ–≤–∞—è –ø–æ–¥–∫—Ä–∞—Å–∫–∞/—Å–≤–µ—á–µ–Ω–∏–µ */
#forgeModal #weaponCard.rarity-epic::before{
  box-shadow: 0 0 36px rgba(190,120,255,0.65);
}

#forgeModal #weaponCard.rarity-legendary::before{
  box-shadow: 0 0 44px rgba(255,205,90,0.75);
  opacity: 1;                    /* –ª–µ–≥–µ–Ω–¥–∞—Ä–∫–∞ —á—É—Ç—å —è—Ä—á–µ */
}

@keyframes forgeRaysSpin{
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to   { transform: translate(-50%, -50%) rotate(360deg); }
}

/* —á—Ç–æ–±—ã –º–µ—á –±—ã–ª –ø–æ–≤–µ—Ä—Ö –ª—É—á–µ–π */
#forgeModal #weaponCard{ position: relative; 
 border-radius: 12px;  /* –∫–∞–∫ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ */
  overflow: hidden;}
#forgeModal #weaponImg{ position: relative; z-index: 2; }
#forgeModal #weaponCard::after{ z-index: 3; } /* LVL –ø–æ–≤–µ—Ä—Ö */

/* === FIX BLUE TAP / ACTIVE COLOR (Telegram / Mobile) === */
button,
button:focus,
button:active {
  outline: none !important;
  box-shadow: none !important;
}

button {
  -webkit-tap-highlight-color: transparent;
}

/* ===== Craft FX (sprite 960x576 = 5x3 frames of 192) ===== */
#forgeModal #forgeEffect{
  position: absolute;
  left: 50%;
  top: 46.5%;                /* –∫–∞–∫ —É craftResult */
  transform: translate(-50%, -50%) scale(0.65);
  width: 192px;
  height: 192px;
  z-index: 44;               /* –≤—ã—à–µ craftResult(40), –Ω–∏–∂–µ –∫–Ω–æ–ø–∫–∏ close(60) */
  pointer-events: none;

  background-image: url("/static/images/fx/craft_fx.png");
  background-repeat: no-repeat;
  background-size: 960px 768px;
  image-rendering: pixelated;

  filter: drop-shadow(0 0 10px rgba(120,255,140,0.55))
          drop-shadow(0 0 18px rgba(120,255,140,0.35));
}

#forgeModal #forgeEffect.hidden{ display:none !important; }

.skills-panel{
  position: absolute;
  left: 50%;
  bottom: 15px; /* –∫–∞–∫ —É .bottom-menu */
  transform: translate(-50%, calc(-100% - 0px)); /* –ø–æ–¥–Ω—è–ª–∏ –≤—ã—à–µ */
  z-index: 25;

  /* —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–æ–∫ –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ */
  --s: clamp(60px, 16vw, 84px);
  --g: clamp(8px, 2.2vw, 12px);

  display: grid;
  grid-template-columns: repeat(5, var(--s)); /* 5 –≤ —Ä—è–¥ */
  grid-auto-rows: var(--s);
  gap: var(--g);

  justify-content: center;
  align-items: center;
  justify-items: center;

  pointer-events: auto;
}



/* square skill button */
.skill-btn{
   width: var(--s);
   height: var(--s);

  padding: 0;

  display: flex;
  align-items: center;
  justify-content: center;

  border-radius: 16px;
  border: 1px solid rgba(255,120,80,.8);

  font-weight: 900;
  font-size: clamp(18px, 5vw, 26px);
  line-height: 1;
  color: #fff;

  background: linear-gradient(180deg, #ff6a00, #c43b00);
  box-shadow:
    0 0 16px rgba(255,120,0,.6),
    inset 0 2px 0 rgba(255,255,255,.25);

  cursor: pointer;
  -webkit-tap-highlight-color: transparent;

  position: relative;
  overflow: hidden;
}
/* ===== SKILL COOLDOWN FILL ===== */
.skill-btn.cooldown::before{
  content:"";
  position:absolute;
  left:0; right:0; top:0;
  height: var(--cdp, 100%);         /* 100% -> 0% */
  background: rgba(0,0,0,0.55);
  pointer-events:none;
}


.skill-btn:active{
  transform: scale(0.96);
  filter: brightness(1.15);
}

.skill-btn:disabled{
  opacity: 0.45;
  cursor: not-allowed;
  filter: grayscale(.3);
}

/* –ø—É—Å—Ç—ã–µ —Å–ª–æ—Ç—ã (—Å–µ—Ä—ã–µ) */
.skill-btn--empty{
  border: 1px solid rgba(255,255,255,.14);
  background: linear-gradient(180deg, rgba(70,70,70,.7), rgba(25,25,25,.9));
  box-shadow:
    0 0 10px rgba(0,0,0,.55),
    inset 0 2px 0 rgba(255,255,255,.10);
}

/* –¶–µ–Ω–∞ –∫—Ä–∞—Ñ—Ç–∞ –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π */
#forgeModal #craftCostTxt{
  position: absolute;
  left: 50%;
  bottom: 104px;          /* –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π –∫—Ä–∞—Ñ—Ç–∞ */
  transform: translateX(-50%);
  z-index: 46;

  padding: 6px 10px;
  border-radius: 12px;

  font-weight: 900;
  font-size: 13px;
  color: rgba(255,255,255,0.92);
  text-shadow: 0 2px 6px rgba(0,0,0,0.85);

  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,190,90,0.25);
}

#forgeModal #craftCostTxt.craft-cost--bad{
  border-color: rgba(255,80,80,0.55);
  box-shadow: 0 0 16px rgba(255,80,80,0.18);
  color: rgba(255,220,220,0.95);
}

.forge-hud__sep{
  opacity: 0.65;
  font-weight: 900;
  margin: 0 -2px;
}

.forge-hud__pair{
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
